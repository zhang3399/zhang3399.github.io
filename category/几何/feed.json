{
    "version": "https://jsonfeed.org/version/1",
    "title": "CodeVortex记事本 • All posts by \"几何\" category",
    "description": "滴答滴答滴答",
    "home_page_url": "https://zhang3399.github.io",
    "items": [
        {
            "id": "https://zhang3399.github.io/2025/07/14/%E5%87%A0%E4%BD%95/2025-7-14-geomet/",
            "url": "https://zhang3399.github.io/2025/07/14/%E5%87%A0%E4%BD%95/2025-7-14-geomet/",
            "title": "3D点云曲率计算",
            "date_published": "2025-07-14T02:00:00.000Z",
            "content_html": "<h1 id=\"曲率\"><a class=\"markdownIt-Anchor\" href=\"#曲率\">#</a> 曲率</h1>\n<blockquote>\n<p>曲率（curvature）就是针对曲线上某个点的切线方向角对弧长的转动率，通过微分来定义，表明曲线偏离直线的程度。数学上表明曲线在某一点的弯曲程度的数值。</p>\n</blockquote>\n<p><img loading=\"lazy\" src=\"/images/%E6%9B%B2%E7%8E%87.svg\" alt=\"曲率\"></p>\n<h2 id=\"参数曲线的曲率公式\"><a class=\"markdownIt-Anchor\" href=\"#参数曲线的曲率公式\">#</a> 参数曲线的曲率公式</h2>\n<blockquote>\n<p>曲线的切线方向角：曲线在点 P 处的切线与 x 轴正向的夹角<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>α</mi></mrow><annotation encoding=\"application/x-tex\">\\alpha</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.0037em;\">α</span></span></span></span></p>\n</blockquote>\n<p><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><mi>k</mi><mo>=</mo><mfrac><mrow><mi mathvariant=\"normal\">∣</mi><mi>d</mi><mi>α</mi><mi mathvariant=\"normal\">∣</mi></mrow><mrow><mi>d</mi><mi>s</mi></mrow></mfrac><mo>=</mo><mfrac><mrow><mi mathvariant=\"normal\">∣</mi><msup><mi>y</mi><mrow><mo mathvariant=\"normal\">′</mo><mo mathvariant=\"normal\">′</mo></mrow></msup><mi mathvariant=\"normal\">∣</mi></mrow><mrow><mo stretchy=\"false\">(</mo><mn>1</mn><mo>+</mo><msup><mi>y</mi><mrow><mo mathvariant=\"normal\">′</mo><mn>2</mn></mrow></msup><msup><mo stretchy=\"false\">)</mo><mrow><mn>3</mn><mi mathvariant=\"normal\">/</mi><mn>2</mn></mrow></msup></mrow></mfrac></mrow><annotation encoding=\"application/x-tex\">k=\\frac{|d\\alpha|}{ds}=\\frac{|y&#x27;&#x27;|}{(1+y&#x27;^2)^{3/2}}\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03148em;\">k</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.113em;vertical-align:-0.686em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.427em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">d</span><span class=\"mord mathnormal\">s</span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">∣</span><span class=\"mord mathnormal\">d</span><span class=\"mord mathnormal\" style=\"margin-right:0.0037em;\">α</span><span class=\"mord\">∣</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.686em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.3829em;vertical-align:-0.954em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.4289em;\"><span style=\"top:-2.296em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mopen\">(</span><span class=\"mord\">1</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.7401em;\"><span style=\"top:-2.989em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">′2</span></span></span></span></span></span></span></span></span><span class=\"mclose\"><span class=\"mclose\">)</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.814em;\"><span style=\"top:-2.989em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">3/2</span></span></span></span></span></span></span></span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">∣</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.7519em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">′′</span></span></span></span></span></span></span></span></span><span class=\"mord\">∣</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.954em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span></span></p>\n<p>适用于<strong>连续</strong>、<strong>可导</strong>的函数曲线</p>\n<ul>\n<li><code>s</code>  为弧长；</li>\n<li><code>y'</code> , <code>y''</code>  分别为函数的一阶导数和二阶导数。</li>\n</ul>\n<p><strong>局限性</strong>：需要函数的解析表达式 (如 <code>y=x²</code> ), 但点云数据（如 3D 扫描得到的离散点）没有显式的函数形式，无法直接计算导数。</p>\n<h2 id=\"点云曲率计算\"><a class=\"markdownIt-Anchor\" href=\"#点云曲率计算\">#</a> 点云曲率计算</h2>\n<h2 id=\"点云曲率计算的原理\"><a class=\"markdownIt-Anchor\" href=\"#点云曲率计算的原理\">#</a> 点云曲率计算的原理</h2>\n<p>基于局部几何分析，适用于离散点云：</p>\n<ol>\n<li>邻域协方差矩阵（Covariance Matrix），构建协方差矩阵 cov.</li>\n<li>特征值分解：计算协方差矩阵的特征值 λ0≤λ1≤λ2 和特征向量。</li>\n<li>曲率定义：曲率 k=λ0 / (λ0+λ1+λ2)。</li>\n</ol>\n<p><strong>协方差矩阵</strong></p>\n<ul>\n<li><strong>协方差矩阵</strong>：描述点云局部几何特征，反映邻域点在法向方向上的离散程度。</li>\n<li><strong>协方差矩阵计算</strong>：计算邻域点坐标的均值 mean，然后计算邻域点坐标减去均值后的协方差矩阵 cov。</li>\n</ul>\n<p>协方差矩阵：</p>\n<p><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><mi>c</mi><mi>o</mi><mi>v</mi><mo>=</mo><mfrac><mn>1</mn><mi>k</mi></mfrac><munderover><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>k</mi></munderover><mo stretchy=\"false\">(</mo><msub><mi>p</mi><mi>i</mi></msub><mo>−</mo><mi>m</mi><mi>e</mi><mi>a</mi><mi>n</mi><mo stretchy=\"false\">)</mo><mo stretchy=\"false\">(</mo><msub><mi>p</mi><mi>i</mi></msub><mo>−</mo><mi>m</mi><mi>e</mi><mi>a</mi><mi>n</mi><msup><mo stretchy=\"false\">)</mo><mi>T</mi></msup></mrow><annotation encoding=\"application/x-tex\">cov = \\frac{1}{k}\\sum_{i=1}^{k}(p_i-mean)(p_i-mean)^T\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">co</span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">v</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:3.1138em;vertical-align:-1.2777em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.3214em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03148em;\">k</span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.686em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mop op-limits\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.8361em;\"><span style=\"top:-1.8723em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">i</span><span class=\"mrel mtight\">=</span><span class=\"mord mtight\">1</span></span></span></span><span style=\"top:-3.05em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span><span class=\"mop op-symbol large-op\">∑</span></span></span><span style=\"top:-4.3em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03148em;\">k</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.2777em;\"><span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathnormal\">p</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3117em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\">m</span><span class=\"mord mathnormal\">e</span><span class=\"mord mathnormal\">an</span><span class=\"mclose\">)</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathnormal\">p</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3117em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.1413em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\">m</span><span class=\"mord mathnormal\">e</span><span class=\"mord mathnormal\">an</span><span class=\"mclose\"><span class=\"mclose\">)</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8913em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.13889em;\">T</span></span></span></span></span></span></span></span></span></span></span></span></p>\n<ul>\n<li><code>p_i</code>  为邻域点坐标；</li>\n<li><code>mean</code>  为邻域点坐标的均值；</li>\n<li><code>k</code>  为邻域点的数量。</li>\n</ul>\n<h3 id=\"特征值分解\"><a class=\"markdownIt-Anchor\" href=\"#特征值分解\">#</a> 特征值分解</h3>\n<ul>\n<li>\n<p>特征向量：代表邻域点分布的 “主方向”（即数据最分散的方向）。例如，若邻域点近似在一个平面上，特征向量会包括平面内的两个正交方向（主方向）和垂直于平面的方向。</p>\n</li>\n<li>\n<p>特征值：代表邻域点在对应主方向上的 “离散程度”（可理解为 “伸展幅度”）。特征值越大，说明数据在该方向上越分散。</p>\n<ul>\n<li>最小特征值 λ0：对应数据最 “紧凑” 的方向（离散程度最小）；</li>\n<li>最大特征值 λ2：对应数据最 “伸展” 的方向（离散程度最大）。</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"曲率定义\"><a class=\"markdownIt-Anchor\" href=\"#曲率定义\">#</a> 曲率定义</h3>\n<p><strong>几何意义</strong>：</p>\n<ul>\n<li>当邻域点近似分布在平面上时，λ0≈0（法向方向无离散），曲率 k≈0；</li>\n<li>当邻域点位于边缘或尖点时，λ0 增大，曲率 k 较大。</li>\n</ul>\n<p><strong>实例：</strong></p>\n<blockquote>\n<p>基于曲率计算 T 型面的焊点</p>\n</blockquote>\n<p><img loading=\"lazy\" src=\"/images/T%E9%9D%A2.png\" alt=\"T型面\"></p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> open3d <span class=\"token keyword\">as</span> o3d</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> numpy <span class=\"token keyword\">as</span> np</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>weld_pcd <span class=\"token operator\">=</span> o3d<span class=\"token punctuation\">.</span>io<span class=\"token punctuation\">.</span>read_point_cloud<span class=\"token punctuation\">(</span><span class=\"token string\">\"2.ply\"</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># T 型平面点云数据</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>pcd_tree <span class=\"token operator\">=</span> o3d<span class=\"token punctuation\">.</span>geometry<span class=\"token punctuation\">.</span>KDTreeFlann<span class=\"token punctuation\">(</span>weld_pcd<span class=\"token punctuation\">)</span> <span class=\"token comment\"># 构建 KD 树</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>curvatures <span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span>zeros<span class=\"token punctuation\">(</span><span class=\"token builtin\">len</span><span class=\"token punctuation\">(</span>weld_pcd<span class=\"token punctuation\">.</span>points<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># 初始化曲率数组</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token keyword\">for</span> i <span class=\"token keyword\">in</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">len</span><span class=\"token punctuation\">(</span>weld_pcd<span class=\"token punctuation\">.</span>points<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token punctuation\">[</span>k<span class=\"token punctuation\">,</span> idx<span class=\"token punctuation\">,</span> _<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> pcd_tree<span class=\"token punctuation\">.</span>search_knn_vector_3d<span class=\"token punctuation\">(</span>weld_pcd<span class=\"token punctuation\">.</span>points<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token number\">20</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># 搜索邻域点</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token keyword\">if</span> k <span class=\"token operator\">&lt;</span> <span class=\"token number\">3</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        <span class=\"token keyword\">continue</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    points <span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span>asarray<span class=\"token punctuation\">(</span>weld_pcd<span class=\"token punctuation\">.</span>points<span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span>idx<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">:</span><span class=\"token punctuation\">]</span> <span class=\"token comment\"># 获取邻域点坐标</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    mean <span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span>mean<span class=\"token punctuation\">(</span>points<span class=\"token punctuation\">,</span> axis<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token comment\"># 计算邻域点均值</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    points_centered <span class=\"token operator\">=</span> points <span class=\"token operator\">-</span> mean <span class=\"token comment\"># 中心化</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    cov <span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span>dot<span class=\"token punctuation\">(</span>points_centered<span class=\"token punctuation\">.</span>T<span class=\"token punctuation\">,</span> points_centered<span class=\"token punctuation\">)</span> <span class=\"token operator\">/</span> k <span class=\"token comment\"># 计算协方差矩阵</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    eigenvalues<span class=\"token punctuation\">,</span> eigenvectors <span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span>linalg<span class=\"token punctuation\">.</span>eigh<span class=\"token punctuation\">(</span>cov<span class=\"token punctuation\">)</span> <span class=\"token comment\"># 计算特征值</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    curvatures<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> eigenvalues<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">/</span> <span class=\"token punctuation\">(</span>eigenvalues<span class=\"token punctuation\">.</span><span class=\"token builtin\">sum</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token number\">1e-10</span><span class=\"token punctuation\">)</span> <span class=\"token comment\"># 计算曲率</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre></pre></td></tr><tr><td data-num=\"19\"></td><td><pre></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>threshold <span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span>percentile<span class=\"token punctuation\">(</span>curvatures<span class=\"token punctuation\">,</span> <span class=\"token number\">98</span><span class=\"token punctuation\">)</span> <span class=\"token comment\"># 计算曲率阈值</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>is_weld_point <span class=\"token operator\">=</span> curvatures <span class=\"token operator\">></span> threshold <span class=\"token comment\"># 判断是否为焊点</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>weld_points <span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span>asarray<span class=\"token punctuation\">(</span>weld_pcd<span class=\"token punctuation\">.</span>points<span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span>is_weld_point<span class=\"token punctuation\">]</span> <span class=\"token comment\"># 获取焊点坐标</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre> </pre></td></tr><tr><td data-num=\"24\"></td><td><pre>dot_radius <span class=\"token operator\">=</span> <span class=\"token number\">0.001</span> <span class=\"token comment\"># 圆点半径，根据实际场景调整</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>dot_clouds <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre><span class=\"token keyword\">for</span> point <span class=\"token keyword\">in</span> weld_points<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>    sphere <span class=\"token operator\">=</span> o3d<span class=\"token punctuation\">.</span>geometry<span class=\"token punctuation\">.</span>TriangleMesh<span class=\"token punctuation\">.</span>create_sphere<span class=\"token punctuation\">(</span>radius<span class=\"token operator\">=</span>dot_radius<span class=\"token punctuation\">)</span> <span class=\"token comment\"># 创建球体</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>    sphere<span class=\"token punctuation\">.</span>translate<span class=\"token punctuation\">(</span>point<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>    sphere<span class=\"token punctuation\">.</span>paint_uniform_color<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token comment\"># 黄色圆点，可调整颜色</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>    dot_clouds<span class=\"token punctuation\">.</span>append<span class=\"token punctuation\">(</span>sphere<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>o3d<span class=\"token punctuation\">.</span>visualization<span class=\"token punctuation\">.</span>draw_geometries<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>weld_pcd<span class=\"token punctuation\">]</span><span class=\"token operator\">+</span>dot_clouds<span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p><img loading=\"lazy\" src=\"/images/T%E9%9D%A2points.png\" alt=\"焊点\"></p>\n<p><strong>两种方法的联系</strong><br>\n虽然公式形式不同，但两者的核心思想一致：曲率反映曲线 / 曲面的弯曲程度。</p>\n<ul>\n<li>参数曲线公式通过导数直接计算切线方向的变化率；</li>\n<li>点云方法通过邻域几何分析（协方差矩阵和特征值）间接估计弯曲程度。</li>\n</ul>\n<h2 id=\"其他点云曲率计算方法\"><a class=\"markdownIt-Anchor\" href=\"#其他点云曲率计算方法\">#</a> 其他点云曲率计算方法</h2>\n<ul>\n<li><strong>拟合局部曲面</strong>：对邻域点拟合二次曲面（如抛物面），然后计算曲面的曲率。</li>\n<li><strong>法线变化率</strong>：通过相邻点的法线方向差异估计曲率。</li>\n<li><strong>高斯映射</strong>：将点云投影到单位球面上，分析投影点的分布密度。</li>\n</ul>\n",
            "tags": [
                "曲率"
            ]
        }
    ]
}